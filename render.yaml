# ============================================================
# ğŸŒŸ Render Blueprint â€” AI Shorts Generator (Free Starter)
# Version: 1.0.0
# ============================================================
services:
  - type: web
    name: ai-video-generator
    env: node
    plan: starter   # Gratuit
    region: frankfurt
    buildCommand: |
      echo "ğŸš€ [Render] Installing Node deps..."
      npm install
      echo "ğŸ [Render] Installing Python deps..."
      python3 -m venv tts-env
      source tts-env/bin/activate
      pip install --upgrade pip
      pip install -r requirements.txt || echo "âš ï¸ Python deps partial fail (non-blocking)"
      echo "âœ… [Render] Build complete."
    startCommand: |
      echo "ğŸŒŸ Launching AI Shorts Generator..."
      bash ./start-server.sh
    autoDeploy: true
    branch: main
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 10000
      - key: PYTHONUNBUFFERED
        value: "1"
      - key: PYTHONPATH
        value: ./tts-env/bin/python
      - key: LOG_LEVEL
        value: info
    healthCheckPath: /
    disk:
      name: uploads
      mountPath: /mnt/data
      sizeGB: 2
    scaling:
      minInstances: 1
      maxInstances: 1   # obligatoire pour rester dans le gratuit
# ============================================================
# Notes :
# - Gratuit, pas besoin de carte de paiement
# - DÃ©ploie ton serveur Node + venv Python
# - Auto dÃ©ploiement Ã  chaque push sur main
# - Secrets (API keys) Ã  ajouter uniquement via le dashboard Render
# ============================================================
